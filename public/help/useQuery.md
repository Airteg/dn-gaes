### **üîç –ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–æ–¥—É `useQuery`**
```javascript
const { data, error, isLoading } = useQuery({
  queryKey: ["files"],
  queryFn: fetchFiles,
  staleTime: 5000, // –∫–µ—à—É–≤–∞–Ω–Ω—è –Ω–∞ 5 —Å–µ–∫
});
```

üìå **–¶–µ–π –∫–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ö—É–∫ `useQuery` –∑ React Query –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ–∞–π–ª—ñ–≤.**  
–î–∞–≤–∞–π —Ä–æ–∑–±–µ—Ä–µ–º–æ –π–æ–≥–æ **—Ä—è–¥–æ–∫ –∑–∞ —Ä—è–¥–∫–æ–º**.  

---

## **üìå –©–æ —Ä–æ–±–∏—Ç—å `useQuery`?**
`useQuery` ‚Äì —Ü–µ **—Ö—É–∫ —ñ–∑ `react-query`**, —è–∫–∏–π:
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä** (`fetchFiles`).
2. **–ö–µ—Ä—É—î —Å—Ç–∞–Ω–æ–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (`isLoading`), –ø–æ–º–∏–ª–∫–∞–º–∏ (`error`) —Ç–∞ –æ—Ç—Ä–∏–º–∞–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏ (`data`)**.
3. **–ö–µ—à—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç**, —â–æ–± –Ω–µ –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É.

---

## **üîç –†–æ–∑–±—ñ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤**
```javascript
useQuery({
  queryKey: ["files"],
  queryFn: fetchFiles,
  staleTime: 5000, // –∫–µ—à—É–≤–∞–Ω–Ω—è –Ω–∞ 5 —Å–µ–∫
});
```
### **1Ô∏è‚É£ `queryKey: ["files"]`**
üîπ **–©–æ —Ü–µ —Ç–∞–∫–µ?**  
- –¶–µ **—É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á –¥–ª—è –∑–∞–ø–∏—Ç—É** (`["files"]`).  
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.  
- –Ø–∫—â–æ –º–∏ **–∑–∞–ø–∏—Ç–∞—î–º–æ —Ç—ñ –∂ —Å–∞–º—ñ –¥–∞–Ω—ñ (`queryKey: ["files"]`)**, React Query **–ø–æ–≤–µ—Ä–Ω–µ –∫–µ—à–æ–≤–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è**, –∞ –Ω–µ –∑—Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç.

üîπ **–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ –º–∞—Ç–∏ `queryKey`?**  
- –Ø–∫—â–æ –º–∏ **–æ–Ω–æ–≤–ª—é—î–º–æ —Ñ–∞–π–ª–∏**, –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `queryClient.invalidateQueries(["files"])`, —â–æ–± **–ø–µ—Ä–µ–∑–∞–ø–∏—Ç–∞—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ**.

---

### **2Ô∏è‚É£ `queryFn: fetchFiles`**
üîπ **–©–æ —Ü–µ —Ç–∞–∫–µ?**  
- –¶–µ **—Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –≤–∏–∫–æ–Ω—É—î –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä**.  
- **–í–æ–Ω–∞ –º–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –ø—Ä–æ–º—ñ—Å (`Promise`)**, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∏–π React Query.

üîπ **–û—Å—å —è–∫ –≤–∏–≥–ª—è–¥–∞—î `fetchFiles`:**
```javascript
const fetchFiles = async () => {
  const response = await fetch("/api/files");
  if (!response.ok) throw new Error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤!");
  return response.json(); // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ—Ç—Ä–∏–º–∞–Ω—ñ —Ñ–∞–π–ª–∏
};
```
- üîπ **–ó–∞–ø–∏—Ç—É—î `/api/files`**, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤.
- üîπ **–Ø–∫—â–æ –∑–∞–ø–∏—Ç –Ω–µ–≤–¥–∞–ª–∏–π ‚Äì –∫–∏–¥–∞—î –ø–æ–º–∏–ª–∫—É (`throw new Error(...)`).**
- üîπ **–Ø–∫—â–æ —É—Å–ø—ñ—à–Ω–∏–π ‚Äì –ø–æ–≤–µ—Ä—Ç–∞—î `JSON` –∑ `metadataDoc.json`**.

---

### **3Ô∏è‚É£ `staleTime: 5000`**
üîπ **–©–æ —Ü–µ —Ç–∞–∫–µ?**  
- –¶–µ **—á–∞—Å (–≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö), –ø—Ä–æ—Ç—è–≥–æ–º —è–∫–æ–≥–æ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –≤–≤–∞–∂–∞—é—Ç—å—Å—è "–∞–∫—Ç—É–∞–ª—å–Ω–∏–º–∏".**  
- **–ß–µ—Ä–µ–∑ 5000 –º—Å (`5 —Å–µ–∫—É–Ω–¥`) React Query –≤–≤–∞–∂–∞—î –¥–∞–Ω—ñ "–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏"** —ñ **–ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ñ –∑—Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç**.

üîπ **–Ø–∫ –ø—Ä–∞—Ü—é—î `staleTime`?**
| –ß–∞—Å | –î—ñ—è |
|------|------|
| 0 –º—Å  | –í–∏–∫–æ–Ω–∞–Ω–æ –∑–∞–ø–∏—Ç (`fetchFiles`) |
| 1000 –º—Å | –î–∞–Ω—ñ –∫–µ—à—É—é—Ç—å—Å—è |
| 2000 –º—Å | –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ |
| 5000 –º—Å | –î–∞–Ω—ñ –ø–æ–∑–Ω–∞—á–∞—é—Ç—å—Å—è —è–∫ "–∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ", –∞–ª–µ –Ω–µ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è |
| 6000 –º—Å | –Ø–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è ‚Äì —Ä–æ–±–∏—Ç—å—Å—è –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç |

---

## **üìå –©–æ –ø–æ–≤–µ—Ä—Ç–∞—î `useQuery`?**
```javascript
const { data, error, isLoading } = useQuery(...);
```
–¶–µ–π —Ö—É–∫ –ø–æ–≤–µ—Ä—Ç–∞—î **—Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è**:

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å |
|--------|------|
| `data` | –û—Ç—Ä–∏–º–∞–Ω—ñ —Ñ–∞–π–ª–∏ (`metadataDoc.json`) –∞–±–æ `undefined`, —è–∫—â–æ —â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ |
| `error` | `Error` –æ–±'—î–∫—Ç, —è–∫—â–æ –∑–∞–ø–∏—Ç –Ω–µ –≤–¥–∞–≤—Å—è |
| `isLoading` | `true`, –ø–æ–∫–∏ —Ç—Ä–∏–≤–∞—î –∑–∞–ø–∏—Ç |

---

## **üõ† –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É `AdminPage.jsx`**
```jsx
const { data, error, isLoading } = useQuery({
  queryKey: ["files"],
  queryFn: fetchFiles,
  staleTime: 5000,
});

if (isLoading) return <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤...</p>;
if (error) return <p className="text-red-500">–ü–æ–º–∏–ª–∫–∞: {error.message}</p>;

return <FileList files={data?.documents || []} />;
```
‚úÖ **–ü–æ–∫–∏ —Ñ–∞–π–ª–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è (`isLoading`), –ø–æ–∫–∞–∑—É—î–º–æ —Ç–µ–∫—Å—Ç `–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤...`**  
‚úÖ **–Ø–∫—â–æ —Å–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É (`error`), –ø–æ–∫–∞–∑—É—î–º–æ —ó—ó.**  
‚úÖ **–ö–æ–ª–∏ —Ñ–∞–π–ª–∏ –æ—Ç—Ä–∏–º–∞–Ω—ñ (`data`), –ø–µ—Ä–µ–¥–∞—î–º–æ —ó—Ö —É `<FileList />`**.

---

## **üöÄ –©–æ –º–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –∑–∞–≤–¥—è–∫–∏ `useQuery`?**
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è** ‚Äì –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ –≤—Ä—É—á–Ω—É –≤ `useState`.  
‚úÖ **–ú–µ–Ω—à–µ –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** ‚Äì —è–∫—â–æ –¥–∞–Ω—ñ –∫–µ—à–æ–≤–∞–Ω—ñ, React Query –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à.  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** ‚Äì –ø—ñ—Å–ª—è 5 —Å–µ–∫—É–Ω–¥ –¥–∞–Ω—ñ –ø–æ–∑–Ω–∞—á–∞—é—Ç—å—Å—è —è–∫ "–∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ" —Ç–∞ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è.  
‚úÖ **–û–±—Ä–æ–±–∫–∞ —Å—Ç–∞–Ω—É (`isLoading`, `error`)** ‚Äì –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Ä—É—á–Ω—É –ø–∏—Å–∞—Ç–∏ `useState`.

---

## **üìå –ü—ñ–¥—Å—É–º–æ–∫**
```javascript
const { data, error, isLoading } = useQuery({
  queryKey: ["files"],  // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –∫–ª—é—á –∫–µ—à—É
  queryFn: fetchFiles,  // –§—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –æ—Ç—Ä–∏–º—É—î —Ñ–∞–π–ª–∏
  staleTime: 5000,      // –î–∞–Ω—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∏–º–∏ 5 —Å–µ–∫—É–Ω–¥
});
```
üîç **–¶–µ –¥–æ–∑–≤–æ–ª—è—î React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∞–º–∏, –∫–µ—à–µ–º —Ç–∞ –ø–æ–º–∏–ª–∫–∞–º–∏.** üöÄüî•

## **üîç –Ø–∫ –ø—Ä–∞—Ü—é—î –∫–µ—à —É React Query**
React Query –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **—Ä–æ–∑—É–º–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è** –¥–ª—è **–∑–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤** –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ç–∞ **–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ**.

–î–∞–≤–∞–π —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ —Ü–µ –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ:

---

## **üìå 1Ô∏è‚É£ –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è –∫–µ—à—É**
üîπ **–©–æ —Ä–æ–±–∏—Ç—å React Query?**  
- –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø–∏—Ç—ñ (`useQuery`) **–æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –∑ —Å–µ—Ä–≤–µ—Ä–∞** —Ç–∞ **–∑–±–µ—Ä—ñ–≥–∞—î —ó—Ö —É –∫–µ—à—ñ**.
- –Ø–∫—â–æ **—Ç–æ–π —Å–∞–º–∏–π –∑–∞–ø–∏—Ç** (`queryKey`) –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è, React Query **–Ω–µ —Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç, –∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à**.
- **–Ø–∫—â–æ –¥–∞–Ω—ñ "–∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ"**, React Query —Ä–æ–±–∏—Ç—å **–æ–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞–ø–∏—Ç**.

---

## **üìå 2Ô∏è‚É£ –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –∫–µ—à—É**
–£—è–≤—ñ–º–æ, —â–æ —É –Ω–∞—Å —î —Ü–µ–π `useQuery`:
```javascript
const { data } = useQuery({
  queryKey: ["files"], 
  queryFn: fetchFiles, 
  staleTime: 5000, 
  cacheTime: 30000 
});
```
–¶–µ –æ–∑–Ω–∞—á–∞—î:
| –ß–∞—Å (—Å–µ–∫) | –ü–æ–¥—ñ—è |
|-----------|-------|
| 0s  | **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç—É—î—Ç—å—Å—è**, —Ä–æ–±–∏—Ç—å—Å—è **–∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä**. |
| 1s  | –î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —É **–∫–µ—à—ñ** —Ç–∞ –ø–µ—Ä–µ–¥–∞–Ω—ñ –≤ `data`. |
| 2s  | –ü–æ–≤—Ç–æ—Ä–Ω–∏–π —Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Üí **–î–∞–Ω—ñ –±–µ—Ä—É—Ç—å—Å—è –∑ –∫–µ—à—É**, –Ω–µ —Ä–æ–±–∏—Ç—å—Å—è –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç. |
| 5s  | `staleTime` –∑–∞–∫—ñ–Ω—á–∏–≤—Å—è. –î–∞–Ω—ñ —Ç–µ–ø–µ—Ä **–∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ** (–∞–ª–µ —â–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è). |
| 6s  | –Ø–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–Ω–æ–≤–∏—Ç—å—Å—è ‚Äì React Query **—Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç** –Ω–∞ —Å–µ—Ä–≤–µ—Ä. |
| 30s | `cacheTime` –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è ‚Üí **–ö–µ—à –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∑ –ø–∞–º‚Äô—è—Ç—ñ**. |

---

## **üìå 3Ô∏è‚É£ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–µ—à—É**
–£ React Query **—î –¥–≤—ñ –≥–æ–ª–æ–≤–Ω—ñ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è**:

### **üü¢ `staleTime` ‚Äì –∫–æ–ª–∏ –¥–∞–Ω—ñ –≤–≤–∞–∂–∞—é—Ç—å—Å—è "–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏"**
```javascript
useQuery({
  queryKey: ["files"],
  queryFn: fetchFiles,
  staleTime: 5000 // (5 —Å–µ–∫—É–Ω–¥)
});
```
- **–ü—Ä–æ—Ç—è–≥–æ–º `staleTime` (5 —Å–µ–∫—É–Ω–¥) –∑–∞–ø–∏—Ç –Ω–µ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è**.  
- **–ü—ñ—Å–ª—è 5 —Å–µ–∫—É–Ω–¥** ‚Üí –î–∞–Ω—ñ –≤–≤–∞–∂–∞—é—Ç—å—Å—è **"–∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏"**, –∞–ª–µ –≤–æ–Ω–∏ **—â–µ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤ –∫–µ—à—ñ**.  
- –Ø–∫—â–æ **–≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —Ä–µ—Ä–µ–Ω–¥–µ—Ä –ø—ñ—Å–ª—è `staleTime`**, React Query **—Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç**.

üìå **–ö–æ–ª–∏ `staleTime` = `Infinity`**  
- –î–∞–Ω—ñ **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–≤–∞–∂–∞—é—Ç—å—Å—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–º–∏**.
- React Query **–Ω–µ —Ä–æ–±–∏—Ç–∏–º–µ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**.
- –ù–æ–≤–∏–π –∑–∞–ø–∏—Ç –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É (`queryClient.invalidateQueries`).

---

### **üü† `cacheTime` ‚Äì —Å–∫—ñ–ª—å–∫–∏ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∫–µ—à—ñ –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è**
```javascript
useQuery({
  queryKey: ["files"],
  queryFn: fetchFiles,
  cacheTime: 30000 // (30 —Å–µ–∫—É–Ω–¥)
});
```
- –Ø–∫—â–æ **–∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —â–æ –≤–∏–∫–ª–∏–∫–∞–≤ `useQuery`, –∑–Ω–∏–∫–Ω–µ** (unmount) ‚Üí **React Query –Ω–µ –≤–∏–¥–∞–ª—è—î –∫–µ—à –æ–¥—Ä–∞–∑—É!**  
- **–î–∞–Ω—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤ –ø–∞–º‚Äô—è—Ç—ñ —â–µ `cacheTime` –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥** (30 —Å–µ–∫—É–Ω–¥ —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É).  
- –Ø–∫—â–æ –ø—Ä–æ—Ç—è–≥–æ–º `cacheTime` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–Ω–æ–≤—É –∑–º–æ–Ω—Ç—É—î—Ç—å—Å—è, **React Query –ø–æ–≤–µ—Ä–Ω–µ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –±–µ–∑ –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É**.  
- **–ü—ñ—Å–ª—è `cacheTime` –∫–µ—à –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é**.

üìå **–Ø–∫—â–æ `cacheTime = 0`**  
- –î–∞–Ω—ñ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è **–≤—ñ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è unmount**, —â–æ –º–æ–∂–µ **–ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –∑–∞–π–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤**.  
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **—Ä—ñ–¥–∫–æ**.

---

## **üìå 4Ô∏è‚É£ –Ø–∫ –∫–µ—à –ø—Ä–∞—Ü—é—î —É `useMutation`**
`useMutation` **–Ω–µ –∫–µ—à—É—î –¥–∞–Ω—ñ**, –∞–ª–µ –¥–æ–∑–≤–æ–ª—è—î **—ñ–Ω–≤–∞–ª—ñ–¥–æ–≤—É–≤–∞—Ç–∏ (`invalidateQueries`) –∫–µ—à, –∫–æ–ª–∏ —â–æ—Å—å –∑–º—ñ–Ω–∏–ª–æ—Å—è**.

**–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–µ—à—É –ø—ñ—Å–ª—è –º—É—Ç–∞—Ü—ñ—ó (`POST` –∞–±–æ `DELETE`):**
```javascript
const uploadMutation = useMutation({
  mutationFn: uploadFile,
  onSuccess: () => {
    queryClient.invalidateQueries(["files"]); // üü¢ –û–Ω–æ–≤–ª—é—î–º–æ –∫–µ—à
  },
});
```
1Ô∏è‚É£ **–ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ñ–∞–π–ª—É** ‚Üí **React Query –æ—á–∏—â—É—î –∫–µ—à**.  
2Ô∏è‚É£ **–¶–µ –∑–º—É—à—É—î `useQuery(["files"])` –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç** –Ω–∞ —Å–µ—Ä–≤–µ—Ä.  
3Ô∏è‚É£ **–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**.

---

## **üìå 5Ô∏è‚É£ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–µ—à—É**
### **üü¢ `prefetchQuery` ‚Äì –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –Ω–∞–ø–µ—Ä–µ–¥**
–Ø–∫—â–æ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –¥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É**, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `prefetchQuery`:
```javascript
queryClient.prefetchQuery(["files"], fetchFiles);
```
üìå –¶–µ **–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∫–µ—à –Ω–∞–ø–µ—Ä–µ–¥**, –∞–ª–µ **–Ω–µ –≤–∏–∫–ª–∏–∫–∞—î —Ä–µ—Ä–µ–Ω–¥–µ—Ä**.  

---

### **üîÑ `setQueryData` ‚Äì –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–µ—à—É –±–µ–∑ –∑–∞–ø–∏—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä**
```javascript
queryClient.setQueryData(["files"], (oldData) => ({
  ...oldData,
  documents: [...oldData.documents, newFile],
}));
```
üìå –¶–µ **–¥–æ–¥–∞—î –Ω–æ–≤–∏–π —Ñ–∞–π–ª —É –∫–µ—à** –±–µ–∑ –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É.  

---

## **üìå 6Ô∏è‚É£ –ö–æ–ª–∏ —Ä–æ–±–∏—Ç–∏ `invalidateQueries`?**
üîπ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `queryClient.invalidateQueries(["files"])`, —è–∫—â–æ:
‚úÖ –§–∞–π–ª **–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ** (`POST`)  
‚úÖ –§–∞–π–ª **–≤–∏–¥–∞–ª–µ–Ω–æ** (`DELETE`)  
‚úÖ –§–∞–π–ª **–≤—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω–æ**  

---

## **üöÄ –ü—ñ–¥—Å—É–º–æ–∫**
| –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è | –û–ø–∏—Å |
|-------------|------|
| `staleTime` | –Ø–∫ –¥–æ–≤–≥–æ –¥–∞–Ω—ñ –≤–≤–∞–∂–∞—é—Ç—å—Å—è "–∞–∫—Ç—É–∞–ª—å–Ω–∏–º–∏". –ü—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ü—å–æ–≥–æ —á–∞—Å—É React Query **–æ–Ω–æ–≤–ª—é—î —ó—Ö –ø—Ä–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ñ**. |
| `cacheTime` | –Ø–∫ –¥–æ–≤–≥–æ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤ –ø–∞–º‚Äô—è—Ç—ñ –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —ó—Ö –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î. |
| `invalidateQueries` | –í–∏–∫–ª–∏–∫–∞—î –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –¥–∞–Ω—ñ —â–µ –Ω–µ –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏. |
| `prefetchQuery` | –û—Ç—Ä–∏–º—É—î –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –Ω–∞–ø–µ—Ä–µ–¥, –∞–ª–µ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î —Ä–µ—Ä–µ–Ω–¥–µ—Ä. |
| `setQueryData` | –û–Ω–æ–≤–ª—é—î –∫–µ—à –≤—Ä—É—á–Ω—É –±–µ–∑ –∑–∞–ø–∏—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä. |

---

## **üìå 7Ô∏è‚É£ –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥**
```javascript
const { data, isLoading } = useQuery({
  queryKey: ["files"],
  queryFn: fetchFiles,
  staleTime: 10000, // 10 —Å–µ–∫ –¥–∞–Ω—ñ –∞–∫—Ç—É–∞–ª—å–Ω—ñ
  cacheTime: 60000, // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ –∫–µ—à—ñ 60 —Å–µ–∫
});
```
‚úÖ **–Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–∫—Ä–∏—î —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤ —ñ –∑–∞–∫—Ä–∏—î –π–æ–≥–æ**, –∫–µ—à **–∑–∞–ª–∏—à–∏—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω–∏–º 60 —Å–µ–∫—É–Ω–¥**.  
‚úÖ **–Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–µ—Ä–Ω–µ—Ç—å—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥**, **React Query –ø–æ–∫–∞–∂–µ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ** –±–µ–∑ –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É.  
‚úÖ **–Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–µ—Ä–Ω–µ—Ç—å—Å—è —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥**, **React Query –∑—Ä–æ–±–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç** –Ω–∞ —Å–µ—Ä–≤–µ—Ä.  

---

## **üöÄ –í–∏—Å–Ω–æ–≤–∫–∏**
‚úÖ React Query **–º—ñ–Ω—ñ–º—ñ–∑—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤**, –∫–µ—à—É—é—á–∏ –¥–∞–Ω—ñ.  
‚úÖ **`staleTime`** –≤–∏–∑–Ω–∞—á–∞—î, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ **–æ–Ω–æ–≤–∏—Ç–∏ –∫–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ**.  
‚úÖ **`cacheTime`** –≤–∏–∑–Ω–∞—á–∞—î, –∫–æ–ª–∏ **–≤–∏–¥–∞–ª—è—Ç–∏ –∫–µ—à —ñ–∑ –ø–∞–º‚Äô—è—Ç—ñ**.  
‚úÖ **`invalidateQueries`** –∑–º—É—à—É—î React Query **–æ–Ω–æ–≤–∏—Ç–∏ –∫–µ—à –≤—Ä—É—á–Ω—É** –ø—ñ—Å–ª—è –∑–º—ñ–Ω.  

---

### üî• **–ß–∏ –≤—Å–µ –∑—Ä–æ–∑—É–º—ñ–ª–æ? –ú–æ–∂—É –ø–æ—è—Å–Ω–∏—Ç–∏ —â–µ –±—ñ–ª—å—à–µ, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ!** üòéüöÄ