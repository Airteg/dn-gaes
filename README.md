–í–∞—à –ø—ñ–¥—Ö—ñ–¥ –¥–æ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑ Google —ñ email/password –≤–∏–≥–ª—è–¥–∞—î –ª–æ–≥—ñ—á–Ω–∏–º —ñ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏–º —ñ–∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É, –∞–ª–µ —î –∫—ñ–ª—å–∫–∞ –º–æ–º–µ–Ω—Ç—ñ–≤, —è–∫—ñ –≤–∞—Ä—Ç–æ –æ–±–≥–æ–≤–æ—Ä–∏—Ç–∏ –π –ø–æ–∫—Ä–∏—Ç–∏–∫—É–≤–∞—Ç–∏, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –π–æ–≥–æ –±—ñ–ª—å—à –Ω–∞–¥—ñ–π–Ω–∏–º —ñ –≥–Ω—É—á–∫–∏–º, –æ—Å–æ–±–ª–∏–≤–æ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —ñ–Ω—à–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤. –Ø –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—é –≤–∞—à—É –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—é, –≤–∫–∞–∂—É –Ω–∞ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ —Å–ª–∞–±–∫—ñ –º—ñ—Å—Ü—è —Ç–∞ –∑–∞–ø—Ä–æ–ø–æ–Ω—É—é –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è. –ü–æ—Ç—ñ–º –º–∏ –ø–µ—Ä–µ–π–¥–µ–º–æ –¥–æ —Å–∏—Ç—É–∞—Ü—ñ—ó –∑ email/password.

---

### –í–∞—à –ø—ñ–¥—Ö—ñ–¥ –¥–ª—è Google OAuth
#### –û–ø–∏—Å
1. **–ü—Ä–æ–≤–∞–π–¥–µ—Ä–∏**: Google + email/password –∑–∞—Ä–∞–∑, —ñ–∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –¥–æ–¥–∞–≤–∞–Ω–Ω—è —ñ–Ω—à–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É.
2. **–°–∏—Ç—É–∞—Ü—ñ—è: –í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google**:
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î `email` —É –±–∞–∑—ñ (`users`).
     - **–Ø–∫—â–æ email –Ω–µ —ñ—Å–Ω—É—î**: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ `/register`.
     - **–Ø–∫—â–æ email —ñ—Å–Ω—É—î**:
       - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π email –¥–æ Google (–∞–±–æ —ñ–Ω—à–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).
       - –Ø–∫—â–æ –ø—Ä–∏–≤‚Äô—è–∑–∫–∏ –Ω–µ–º–∞—î (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `method: "credentials"`), –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ `/register` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: *"–¶–µ–π email —ñ—Å–Ω—É—î –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö. –û–±–µ—Ä—ñ—Ç—å —ñ–Ω—à–∏–π –∞–∫–∞—É–Ω—Ç"*.
     - **–Ø–∫—â–æ email –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π –¥–æ Google**: –î–æ–∑–≤–æ–ª—è—î–º–æ –≤—Ö—ñ–¥, –æ–Ω–æ–≤–ª—é—î–º–æ `lastLogin`.
   - **–û–ø—Ü—ñ—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**:
     - –Ø–∫—â–æ —ñ–Ω—à–æ–≥–æ –∞–∫–∞—É–Ω—Ç–∞ –Ω–µ–º–∞—î, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î "–ó–∞–±—É–≤ –ø–∞—Ä–æ–ª—å" –¥–ª—è email/password.
     - –£ –∫–∞–±—ñ–Ω–µ—Ç—ñ –º–æ–∂–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–∏–≤‚Äô—è–∑–∫—É –¥–æ email/password —ñ –∑–∞–ª–∏—à–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ Google.

#### –ê–ª–≥–æ—Ä–∏—Ç–º (—Å–ø—Ä–æ—â–µ–Ω–∏–π)
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google".
2. –û—Ç—Ä–∏–º—É—î–º–æ `user.email` –≤—ñ–¥ Google.
3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `users`:
   - –ù–µ–º–∞—î ‚Üí `/register`.
   - –Ñ:
     - `method: "google"` ‚Üí –û–Ω–æ–≤–ª—é—î–º–æ `lastLogin`, –¥–æ–∑–≤–æ–ª—è—î–º–æ –≤—Ö—ñ–¥.
     - `method: "credentials"` ‚Üí `/register?error=EmailExists`.

---

### –ö—Ä–∏—Ç–∏–∫–∞ –ø—ñ–¥—Ö–æ–¥—É
#### 1. –ü–µ—Ä–µ–≤–∞–≥–∏
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**: –Ø–∫—â–æ email –Ω–µ –∑–∞–π–Ω—è—Ç–∏–π, –≤–æ–Ω–∏ –π–¥—É—Ç—å –Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é, —â–æ –∑—Ä–æ–∑—É–º—ñ–ª–æ.
- **–ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∞–º**: –í–∏ —è–≤–Ω–æ —Ä–æ–∑–¥—ñ–ª—è—î—Ç–µ –º–µ—Ç–æ–¥–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (`google` vs `credentials`), —É–Ω–∏–∫–∞—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É.
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**: –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–¥–∞–ª–∏—Ç–∏ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ —É –∫–∞–±—ñ–Ω–µ—Ç—ñ ‚Äî –∑—Ä—É—á–Ω–∞ –æ–ø—Ü—ñ—è.
- **–ú–∞–π–±—É—Ç–Ω—î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è**: –õ–æ–≥—ñ–∫–∞ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é `method` –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –¥–ª—è —ñ–Ω—à–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `facebook`, `github`).

#### 2. –°–ª–∞–±–∫—ñ –º—ñ—Å—Ü—è —Ç–∞ –ø—Ä–æ–±–ª–µ–º–∏
1. **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ `/register` –ø—Ä–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ**:
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –Ø–∫—â–æ email —É–∂–µ –∑–∞–π–Ω—è—Ç–∏–π —ñ–∑ `method: "credentials"`, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ `/register` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º "–û–±–µ—Ä—ñ—Ç—å —ñ–Ω—à–∏–π –∞–∫–∞—É–Ω—Ç" –º–æ–∂–µ –∑–∞–ø–ª—É—Ç–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –ß–æ–º—É –Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é, —è–∫—â–æ email —É–∂–µ —î? –õ–æ–≥—ñ—á–Ω—ñ—à–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –Ω–∞ `/login` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: *"–¶–µ–π email –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ email/password. –£–≤—ñ–π–¥—ñ—Ç—å —Ç–∞–∫ –∞–±–æ —Å–∫–∏–Ω—å—Ç–µ –ø–∞—Ä–æ–ª—å"*.
   - **–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –Ω–µ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ –π–æ–º—É –Ω–µ —Ç—Ä–µ–±–∞ —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è, –∞ –ª–∏—à–µ –∑–º—ñ–Ω–∏—Ç–∏ –º–µ—Ç–æ–¥ –≤—Ö–æ–¥—É —á–∏ –∞–∫–∞—É–Ω—Ç.

2. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–≤‚Äô—è–∑—É–≤–∞–Ω–Ω—è**:
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ–∑ `method: "credentials"` —Ö–æ—á–µ –¥–æ–¥–∞—Ç–∏ Google —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± –≤—Ö–æ–¥—É (–∞ –Ω–µ –≤–∏–¥–∞–ª—è—Ç–∏ email/password), –≤–∞—à –ø—ñ–¥—Ö—ñ–¥ —Ü—å–æ–≥–æ –Ω–µ –¥–æ–∑–≤–æ–ª—è—î. –í—ñ–Ω –∑–º—É—à–µ–Ω–∏–π –≤–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π –∞–∫–∞—É–Ω—Ç —ñ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ Google.
   - **–ß–æ–º—É —Ü–µ –Ω–µ–∑—Ä—É—á–Ω–æ**: –£ —Ä–µ–∞–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Gmail, GitHub) –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤ –¥–æ –æ–¥–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç–∞ (email + Google + GitHub).

3. **"–ó–∞–±—É–≤ –ø–∞—Ä–æ–ª—å" —è–∫ —î–¥–∏–Ω–∏–π –≤–∏—Ö—ñ–¥**:
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –Ø–∫—â–æ –≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ–º–∞—î —ñ–Ω—à–æ–≥–æ Google-–∞–∫–∞—É–Ω—Ç–∞, –≤—ñ–Ω –∑–º—É—à–µ–Ω–∏–π —Å–∫–∏–¥–∞—Ç–∏ –ø–∞—Ä–æ–ª—å –¥–ª—è email/password, –∞ –ø–æ—Ç—ñ–º –≤–∏–¥–∞–ª—è—Ç–∏ —Ü–µ–π –º–µ—Ç–æ–¥. –¶–µ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –∫—Ä–æ–∫–∏, —è–∫—ñ –º–æ–∂–Ω–∞ —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏.
   - **–ß–æ–º—É —Ü–µ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç—ñ—Ç–∏ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ Google –¥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ –∞–∫–∞—É–Ω—Ç–∞ –±–µ–∑ —Å–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è.

4. **–ú–∞–π–±—É—Ç–Ω—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏**:
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç—ñ–ª—å–∫–∏ –Ω–∞ `method: "google"` —á–∏ `method: "credentials"` –Ω–µ –≤—Ä–∞—Ö–æ–≤—É—î, —â–æ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É –º–æ–∂—É—Ç—å –±—É—Ç–∏ `facebook`, `github` —Ç–æ—â–æ. –Ø–∫—â–æ email –∑–∞–π–Ω—è—Ç–∏–π —á–µ—Ä–µ–∑ `github`, –∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ Google, —â–æ —Ç–æ–¥—ñ?
   - **–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ**: –ü–æ—Ç—Ä—ñ–±–Ω–∞ –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤—Å—ñ—Ö OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤.

5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Å—Ç–∞—Ç—É—Å—É "–∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π"**:
   - **–ü—Ä–æ–±–ª–µ–º–∞**: –£ –≤–∞—à—ñ–π –º–æ–¥–µ–ª—ñ –Ω–µ–º–∞—î —è–≤–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å—É, —è–∫–∏–π –±–∏ –≤–∫–∞–∑—É–≤–∞–≤, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤—ñ–Ω –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–≤—Å—è —á–µ—Ä–µ–∑ `/register`, –∞–ª–µ —â–µ –Ω–µ –ø—Ä–∏–≤‚Äô—è–∑–∞–≤ Google, —Ü–µ –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–ª—É—Ç–∞–Ω–∏–Ω—É.
   - **–ß–æ–º—É —Ü–µ –∫–æ—Ä–∏—Å–Ω–æ**: –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–ª—è `status: "pending"` —á–∏ `status: "active"` –º–æ–∂–µ —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ –ª–æ–≥—ñ–∫—É.

#### 3. –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó –≤–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è
1. **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ `/login` –∑–∞–º—ñ—Å—Ç—å `/register`**:
   - –Ø–∫—â–æ email –∑–∞–π–Ω—è—Ç–∏–π —ñ–∑ `method: "credentials"`, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–π—Ç–µ –Ω–∞ `/login?error=UseCredentials` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: *"–¶–µ–π email –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ email/password. –£–≤—ñ–π–¥—ñ—Ç—å —Ç–∞–∫ –∞–±–æ —Å–∫–∏–Ω—å—Ç–µ –ø–∞—Ä–æ–ª—å"*.
   - –î–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞–ª–∏—à—Ç–µ `/register`.

2. **–î–æ–∑–≤–æ–ª–∏—Ç–∏ –ø—Ä–∏–≤‚Äô—è–∑–∫—É –∫—ñ–ª—å–∫–æ—Ö –º–µ—Ç–æ–¥—ñ–≤**:
   - –î–æ–¥–∞–π—Ç–µ –≤ `users` –º–∞—Å–∏–≤ `methods: ["google", "credentials"]` –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ `method`.
   - –Ø–∫—â–æ email —ñ—Å–Ω—É—î, –∞–ª–µ Google –Ω–µ –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π, –∑–∞–ø—Ä–æ–ø–æ–Ω—É–π—Ç–µ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ –π–æ–≥–æ –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ –∑–∞–º—ñ—Å—Ç—å –±–ª–æ–∫—É–≤–∞–Ω–Ω—è.

3. **–°—Ç–∞—Ç—É—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**:
   - –î–æ–¥–∞–π—Ç–µ –ø–æ–ª–µ `status`:
     - `"pending"`: –ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π, –∞–ª–µ –Ω–µ –ø—Ä–∏–≤‚Äô—è–∑–∞–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä.
     - `"active"`: –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –∞–∫–∞—É–Ω—Ç.
   - –ë–ª–æ–∫—É–π—Ç–µ –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google, —è–∫—â–æ `status: "pending"`, –¥–æ–∫–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è.

4. **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤**:
   - –ó–∞–º—ñ—Å—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ `method: "google"`, –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ, —á–∏ —î `providerAccountId` —É `accounts` –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (`google`, `facebook` —Ç–æ—â–æ).

---

### –û–Ω–æ–≤–ª–µ–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –∫—Ä–∏—Ç–∏–∫–∏)
#### –°–∏—Ç—É–∞—Ü—ñ—è: –í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google".
2. –û—Ç—Ä–∏–º—É—î–º–æ `user.email` —ñ `account.providerAccountId` –≤—ñ–¥ Google.
3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `users` –∑–∞ `email`:
   - **–ù–µ–º–∞—î**:
     - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ `/register`.
   - **–Ñ**:
     - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `accounts` –∑–∞ `provider: "google"` —ñ `providerAccountId`:
       - –Ø–∫—â–æ —î ‚Üí –û–Ω–æ–≤–ª—é—î–º–æ `lastLogin` —É `users`, –¥–æ–∑–≤–æ–ª—è—î–º–æ –≤—Ö—ñ–¥.
       - –Ø–∫—â–æ –Ω–µ–º–∞—î ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `methods` (–∞–±–æ `method`, —è–∫—â–æ –∑–∞–ª–∏—à–∞—î–º–æ –æ–¥–∏–Ω):
         - –Ø–∫—â–æ `methods` –Ω–µ –≤–∫–ª—é—á–∞—î `"google"` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ç—ñ–ª—å–∫–∏ `"credentials"`) ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ `/login?error=UseDifferentMethod` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: *"–¶–µ–π email –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π —ñ–Ω—à–∏–º —Å–ø–æ—Å–æ–±–æ–º. –£–≤—ñ–π–¥—ñ—Ç—å —Ç–∞–∫ –∞–±–æ –ø—Ä–∏–≤‚Äô—è–∂—ñ—Ç—å Google —É –∫–∞–±—ñ–Ω–µ—Ç—ñ"*.
4. –õ–æ–≥—É–≤–∞–Ω–Ω—è: `email`, `provider`, `providerAccountId`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.

#### –û–ø—Ü—ñ—è –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –£ –∫–∞–±—ñ–Ω–µ—Ç—ñ:
  - –î–æ–¥–∞—Ç–∏/–≤–∏–¥–∞–ª–∏—Ç–∏ –º–µ—Ç–æ–¥–∏ (`google`, `credentials` —Ç–æ—â–æ).
  - –°–∫–∏–Ω—É—Ç–∏ –ø–∞—Ä–æ–ª—å –¥–ª—è `credentials`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ.

#### –ú–∞–π–±—É—Ç–Ω—î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
- –î–æ–¥–∞—î–º–æ –Ω–æ–≤—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ (`facebook`, `github`) –¥–æ `methods` —ñ `accounts`.

---

### –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ email/password
–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –º–∏ –æ–±–≥–æ–≤–æ—Ä–∏–ª–∏ Google, –¥–∞–≤–∞–π—Ç–µ –≤–∏–∑–Ω–∞—á–∏–º–æ –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –≤—Ö–æ–¥—É —á–µ—Ä–µ–∑ email/password. –û—Å—å –º–æ—ó –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è, –∞–ª–µ —É—Ç–æ—á–Ω—ñ—Ç—å –≤–∞—à—ñ –≤–∏–º–æ–≥–∏:
1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è**: –¢—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ `/register` (email, password).
2. **–í—Ö—ñ–¥**:
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ email —ñ –ø–∞—Ä–æ–ª—å.
   - –Ø–∫—â–æ email –∑–∞–π–Ω—è—Ç–∏–π Google, –±–ª–æ–∫—É—î–º–æ —á–∏ –¥–æ–∑–≤–æ–ª—è—î–º–æ?
3. **–ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏**: –Ø–∫ –ø–æ–≤–æ–¥–∏—Ç–∏—Å—è, —è–∫—â–æ email —É–∂–µ –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π –¥–æ Google?

**–ü–∏—Ç–∞–Ω–Ω—è –¥–æ –≤–∞—Å**:
- –ß–∏ —Ö–æ—á–µ—Ç–µ –≤–∏, —â–æ–± email/password –±—É–≤ –æ—Å–Ω–æ–≤–Ω–∏–º –º–µ—Ç–æ–¥–æ–º, –∞ Google ‚Äî –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º?
- –ß–∏ –¥–æ–∑–≤–æ–ª—è—Ç–∏ –æ–¥–Ω–æ–º—É email –º–∞—Ç–∏ –æ–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ (`google` + `credentials`)?

–î–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —ñ —è —Ä–æ–∑–ø–∏—à—É –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è email/password —ñ–∑ –∫—Ä–∏—Ç–∏–∫–æ—é, —è–∫ –º–∏ –∑—Ä–æ–±–∏–ª–∏ –¥–ª—è Google. –ü–æ—Ç—ñ–º –æ–±‚Äô—î–¥–Ω–∞—î–º–æ —Ü–µ –≤ —î–¥–∏–Ω–∏–π –ø–ª–∞–Ω. –©–æ —Å–∫–∞–∂–µ—Ç–µ?

---
**"–ß–∏ —Ö–æ—á–µ—Ç–µ –≤–∏, —â–æ–± email/password –±—É–≤ –æ—Å–Ω–æ–≤–Ω–∏–º –º–µ—Ç–æ–¥–æ–º, –∞ Google ‚Äî –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º?"**
–Ø –Ω–µ —Ä–æ–∑—É–º—ñ—é –ø–µ—Ä–µ–≤–∞–≥, —Ç–æ–º—É —á–µ–∫–∞—é –Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é.
**"–ß–∏ –¥–æ–∑–≤–æ–ª—è—Ç–∏ –æ–¥–Ω–æ–º—É email –º–∞—Ç–∏ –æ–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ (google + credentials)?"**
–¢–∞–∫... –î–æ–∑–≤–æ–ª—è—Ç–∏ –æ–¥–Ω–æ–º—É email –º–∞—Ç–∏ –≤—Å—ñ –º–µ—Ç–æ–¥–∏ (google + credentials + ...) –Ø —Ç—ñ–ª—å–∫–∏ –ª—è–∫–∞—é—Å—å, —è–∫ –≤—Å–µ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏...

---

–î—è–∫—É—é –∑–∞ –≤–∞—à—ñ —É—Ç–æ—á–Ω–µ–Ω–Ω—è! –í–∞—à—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–∞—é—Ç—å –º–µ–Ω—ñ —á—ñ—Ç–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ –æ–¥–Ω–æ–º—É email –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (Google, email/password —Ç–æ—â–æ), –∞–ª–µ –≤–∏ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —á–∏ –≤–∞—Ä—Ç–æ —Ä–æ–±–∏—Ç–∏ email/password –æ—Å–Ω–æ–≤–Ω–∏–º –º–µ—Ç–æ–¥–æ–º, —ñ –ø–µ—Ä–µ–∂–∏–≤–∞—î—Ç–µ –∑–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è. –Ø –ø–æ—è—Å–Ω—é –ø–µ—Ä–µ–≤–∞–≥–∏ –π –Ω–µ–¥–æ–ª—ñ–∫–∏ –æ–±–æ—Ö –ø—ñ–¥—Ö–æ–¥—ñ–≤, –¥–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é, –∞ –ø–æ—Ç—ñ–º —Ä–æ–∑–ø–∏—à—É –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è email/password —ñ–∑ –∫—Ä–∏—Ç–∏–∫–æ—é. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –º–∏ –æ–±‚Äô—î–¥–Ω–∞—î–º–æ –≤—Å–µ –≤ –ø–ª–∞–Ω —ñ —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—è –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º.

---

### –ß–∏ —Ä–æ–±–∏—Ç–∏ email/password –æ—Å–Ω–æ–≤–Ω–∏–º –º–µ—Ç–æ–¥–æ–º, –∞ Google ‚Äî –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º?
#### –©–æ —Ü–µ –æ–∑–Ω–∞—á–∞—î?
- **Email/password —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π**: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ email/password, –∞ Google (—Ç–∞ —ñ–Ω—à—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏) –¥–æ–¥–∞—é—Ç—å—Å—è —è–∫ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–µ—Ç–æ–¥–∏ –≤—Ö–æ–¥—É –¥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ –∞–∫–∞—É–Ω—Ç–∞.
- **Google —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π**: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ Google –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞, –∞ email/password ‚Äî –¥–æ–¥–∞—Ç–∫–æ–≤–∞ –æ–ø—Ü—ñ—è.

#### –ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏
##### –í–∞—Ä—ñ–∞–Ω—Ç 1: Email/password –æ—Å–Ω–æ–≤–Ω–∏–π, Google –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π
- **–ü–µ—Ä–µ–≤–∞–≥–∏**:
  1. **–ö–æ–Ω—Ç—Ä–æ–ª—å**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä—é—î –∞–∫–∞—É–Ω—Ç —ñ–∑ –ø–∞—Ä–æ–ª–µ–º, —â–æ –¥–∞—î –π–æ–º—É –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —É—á–µ—Ç–∫–æ—é (–º–æ–∂–µ —Å–∫–∏–Ω—É—Ç–∏ –ø–∞—Ä–æ–ª—å, –≤–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏).
  2. **–ë–µ–∑–ø–µ–∫–∞**: –ü–∞—Ä–æ–ª—å ‚Äî —Ü–µ "—Ä—ñ–¥–Ω–∏–π" –º–µ—Ç–æ–¥, —è–∫–∏–π –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ (Google –º–æ–∂–µ –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ –∞–∫–∞—É–Ω—Ç).
  3. **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ (Google, Facebook) —É –∫–∞–±—ñ–Ω–µ—Ç—ñ.
  4. **–¢—Ä–∞–¥–∏—Ü—ñ–π–Ω—ñ—Å—Ç—å**: –ë—ñ–ª—å—à—ñ—Å—Ç—å —Å–∏—Å—Ç–µ–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –±–∞–Ω–∫–∏, –º–∞–≥–∞–∑–∏–Ω–∏) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å email/password —è–∫ –±–∞–∑–æ–≤–∏–π –º–µ—Ç–æ–¥.
- **–ù–µ–¥–æ–ª—ñ–∫–∏**:
  1. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**: –ü–æ—Ç—Ä—ñ–±–Ω–æ —Å–ø–æ—á–∞—Ç–∫—É –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É, –∞ –ø–æ—Ç—ñ–º –ø—Ä–∏–≤‚Äô—è–∑—É–≤–∞—Ç–∏ Google.
  2. **–î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫—Ä–æ–∫**: –ù–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ —à–≤–∏–¥–∫–∏–π –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google –±–µ–∑ –ø–∞—Ä–æ–ª—è.

##### –í–∞—Ä—ñ–∞–Ω—Ç 2: Google –æ—Å–Ω–æ–≤–Ω–∏–π, email/password –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π
- **–ü–µ—Ä–µ–≤–∞–≥–∏**:
  1. **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ Google –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º, –±–µ–∑ –ø–∞—Ä–æ–ª—è.
  2. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Ñ–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ ‚Äî Google –≤—Å–µ —Ä–æ–±–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
  3. **–ü–æ–ø—É–ª—è—Ä–Ω—ñ—Å—Ç—å**: –°–æ—Ü–º–µ—Ä–µ–∂—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Twitter, Discord) —á–∞—Å—Ç–æ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google –±–µ–∑ –ø–∞—Ä–æ–ª—è.
- **–ù–µ–¥–æ–ª—ñ–∫–∏**:
  1. **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å**: –Ø–∫—â–æ Google-–∞–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—Ç—Ä–∞—á–∞—î –¥–æ—Å—Ç—É–ø, —è–∫—â–æ email/password –Ω–µ –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π.
  2. **–ú–µ–Ω—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–æ–∂–µ —Å–∫–∏–Ω—É—Ç–∏ –ø–∞—Ä–æ–ª—å, —è–∫—â–æ –π–æ–≥–æ –Ω–µ–º–∞—î.
  3. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —ñ–∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º**: –Ø–∫—â–æ Google ‚Äî –æ—Å–Ω–æ–≤–Ω–∏–π, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∏–≤‚Äô—è–∑–∫–∏ –º–æ–∂–µ –≤–∏–º–∞–≥–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω–æ—ó –ª–æ–≥—ñ–∫–∏.

##### –í–∞—Ä—ñ–∞–Ω—Ç 3: –û–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ —Ä—ñ–≤–Ω–æ–ø—Ä–∞–≤–Ω—ñ
- **–ü–µ—Ä–µ–≤–∞–≥–∏**:
  1. **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∞–º –æ–±–∏—Ä–∞—î, —è–∫ —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è —ñ –≤—Ö–æ–¥–∏—Ç–∏ (Google —á–∏ email/password).
  2. **–ú–∞–π–±—É—Ç–Ω—î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è**: –õ–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ —ñ–Ω—à—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏ (Facebook, GitHub) –Ω–∞ —Ç–æ–º—É –∂ —Ä—ñ–≤–Ω—ñ.
  3. **–ó—Ä—É—á–Ω—ñ—Å—Ç—å**: –û–¥–∏–Ω email –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤ –±–µ–∑ "–≥–æ–ª–æ–≤–Ω–æ–≥–æ".
- **–ù–µ–¥–æ–ª—ñ–∫–∏**:
  1. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –ª–æ–≥—ñ–∫–∏**: –ü–æ—Ç—Ä—ñ–±–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –º—ñ–∂ –º–µ—Ç–æ–¥–∞–º–∏.
  2. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –ë—ñ–ª—å—à–µ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.

#### –ú–æ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è
- **–í–∞—Ä—ñ–∞–Ω—Ç 3: –û–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ —Ä—ñ–≤–Ω–æ–ø—Ä–∞–≤–Ω—ñ**.
- **–ß–æ–º—É**:
  - –í–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–∑–≤–æ–ª—è—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ email (`google`, `credentials`, —ñ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É —ñ–Ω—à—ñ), —â–æ —ñ–¥–µ–∞–ª—å–Ω–æ –≤–ø–∏—Å—É—î—Ç—å—Å—è –≤ —Ü—é –º–æ–¥–µ–ª—å.
  - –¶–µ –¥–∞—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –≥–Ω—É—á–∫—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º: —Ö—Ç–æ—Å—å –º–æ–∂–µ –ø–æ—á–∞—Ç–∏ –∑ Google, —Ö—Ç–æ—Å—å —ñ–∑ email/password.
  - –ó —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –º–∞–π–±—É—Ç–Ω—ñ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ (Facebook, GitHub), —Ä—ñ–≤–Ω–æ–ø—Ä–∞–≤–Ω—ñ—Å—Ç—å —Å–ø—Ä–æ—â—É—î –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è.
  - –í–∞—à —Å—Ç—Ä–∞—Ö —â–æ–¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–∏–π, –∞–ª–µ —è –¥–æ–ø–æ–º–æ–∂—É —Ä–æ–∑–ø–∏—Å–∞—Ç–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —â–æ–± —É—Å–µ –±—É–ª–æ –ø—ñ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.

#### –Ø–∫ —Ü–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏?
- –£ `users` –¥–æ–¥–∞–º–æ –º–∞—Å–∏–≤ `methods: ["google", "credentials"]` –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ `method`.
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –¥–æ–¥–∞–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –º–µ—Ç–æ–¥–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ.

---

### –ê–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è email/password
#### –û–ø–∏—Å
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ —É–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ email/password.
- –î–æ–∑–≤–æ–ª—è—î–º–æ –æ–¥–Ω–æ–º—É email –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤ (`google`, `credentials` —Ç–æ—â–æ).

#### –ê–ª–≥–æ—Ä–∏—Ç–º
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å email —ñ –ø–∞—Ä–æ–ª—å —É —Ñ–æ—Ä–º—ñ –≤—Ö–æ–¥—É.
2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `users` –∑–∞ `email`:
   - **–ù–µ–º–∞—î**:
     - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ `/register?error=UserNotFound` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: *"–¶–µ–π email –Ω–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π. –ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å"*.
   - **–Ñ**:
     - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `methods`:
       - –Ø–∫—â–æ `methods` –≤–∫–ª—é—á–∞—î `"credentials"`:
         - –ü–æ—Ä—ñ–≤–Ω—é—î–º–æ –≤–≤–µ–¥–µ–Ω–∏–π –ø–∞—Ä–æ–ª—å —ñ–∑ –∑–∞—Ö–µ—à–æ–≤–∞–Ω–∏–º —É –±–∞–∑—ñ.
         - –Ø–∫—â–æ –∑–±—ñ–≥–∞—î—Ç—å—Å—è ‚Üí –û–Ω–æ–≤–ª—é—î–º–æ `lastLogin`, –¥–æ–∑–≤–æ–ª—è—î–º–æ –≤—Ö—ñ–¥.
         - –Ø–∫—â–æ –Ω—ñ ‚Üí –ü–æ–º–∏–ª–∫–∞: *"–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å"*.
       - –Ø–∫—â–æ `methods` –Ω–µ –≤–∫–ª—é—á–∞—î `"credentials"` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ç—ñ–ª—å–∫–∏ `"google"`) ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ `/login?error=UseDifferentMethod` —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º: *"–¶–µ–π email –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π –¥–æ Google. –£–≤—ñ–π–¥—ñ—Ç—å —á–µ—Ä–µ–∑ Google –∞–±–æ –¥–æ–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å —É –∫–∞–±—ñ–Ω–µ—Ç—ñ"*.
3. –õ–æ–≥—É–≤–∞–Ω–Ω—è: `email`, `methods`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.

#### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ–¥–µ –Ω–∞ `/register`, –≤–≤–æ–¥–∏—Ç—å email —ñ –ø–∞—Ä–æ–ª—å:
  - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ `users`:
    - –Ø–∫—â–æ email –Ω–µ –∑–∞–π–Ω—è—Ç–∏–π ‚Üí –î–æ–¥–∞—î–º–æ –¥–æ `users` —ñ–∑ `methods: ["credentials"]`.
    - –Ø–∫—â–æ email –∑–∞–π–Ω—è—Ç–∏–π ‚Üí –ü—Ä–æ–ø–æ–Ω—É—î–º–æ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ `credentials` –¥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ –∞–∫–∞—É–Ω—Ç–∞ (—É –∫–∞–±—ñ–Ω–µ—Ç—ñ).

---

### –ö—Ä–∏—Ç–∏–∫–∞ –ø—ñ–¥—Ö–æ–¥—É
#### –ü–µ—Ä–µ–≤–∞–≥–∏
1. **–ì–Ω—É—á–∫—ñ—Å—Ç—å**: –û–¥–∏–Ω email –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤, —â–æ –∑—Ä—É—á–Ω–æ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
2. **–ú–∞–π–±—É—Ç–Ω—î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è**: –õ–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ `facebook`, `github` –¥–æ `methods`.
3. **–ö–æ–Ω—Ç—Ä–æ–ª—å**: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –¥–æ–¥–∞–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –º–µ—Ç–æ–¥–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ.

#### –°–ª–∞–±–∫—ñ –º—ñ—Å—Ü—è
1. **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤**:
   - –Ø–∫—â–æ email –º–∞—î `"google"`, –∞–ª–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å —É —Ñ–æ—Ä–º—ñ, –≤—ñ–Ω –æ—Ç—Ä–∏–º—É—î –ø–æ–º–∏–ª–∫—É, —Ö–æ—á–∞ –º—ñ–≥ –±–∏ —É–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google. –ü–æ—Ç—Ä—ñ–±–Ω–æ —á—ñ—Ç–∫–æ –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç–∏ –ø—Ä–æ –¥–æ—Å—Ç—É–ø–Ω—ñ –º–µ—Ç–æ–¥–∏.
2. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–π–Ω—è—Ç–æ–º—É email**:
   - –Ø–∫—â–æ email —É–∂–µ –º–∞—î `"google"`, –∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –¥–æ–¥–∞—Ç–∏ `"credentials"`, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ `/register` –º–æ–∂–µ –∑–∞–ø–ª—É—Ç–∞—Ç–∏. –õ–æ–≥—ñ—á–Ω—ñ—à–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç–∏ –≤ –∫–∞–±—ñ–Ω–µ—Ç –¥–ª—è –ø—Ä–∏–≤‚Äô—è–∑–∫–∏.
3. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
   - –ë–∞–≥–∞—Ç–æ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π: Google —î/–Ω–µ–º–∞—î, credentials —î/–Ω–µ–º–∞—î, –æ–±–∏–¥–≤–∞ —î —Ç–æ—â–æ.

#### –í–¥–æ—Å–∫–æ–Ω–∞–ª–µ–Ω–Ω—è
1. **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –º–µ—Ç–æ–¥–∏**:
   - –ü—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏: *"–¶–µ–π email –ø—Ä–∏–≤‚Äô—è–∑–∞–Ω–∏–π –¥–æ Google. –£–≤—ñ–π–¥—ñ—Ç—å —á–µ—Ä–µ–∑ Google –∞–±–æ –≤–≤–µ–¥—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å"*.
2. **–ü—Ä–∏–≤‚Äô—è–∑–∫–∞ –≤ –∫–∞–±—ñ–Ω–µ—Ç—ñ**:
   - –ó–∞–º—ñ—Å—Ç—å `/register` –¥–ª—è –∑–∞–π–Ω—è—Ç–æ–≥–æ email –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç–∏ –≤ `/dashboard?addMethod=credentials`.
3. **–°—Ç–∞—Ç—É—Å**:
   - –î–æ–¥–∞—Ç–∏ `status: "active"` –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, —â–æ–± –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏ –Ω–æ–≤—ñ –∞–∫–∞—É–Ω—Ç–∏ –≤—ñ–¥ —ñ—Å–Ω—É—é—á–∏—Ö.

---

### –û–±‚Äô—î–¥–Ω–∞–Ω–∏–π –ø–ª–∞–Ω
#### Google OAuth
- –ù–µ–º–∞—î email ‚Üí `/register`.
- –Ñ email:
  - `methods` –≤–∫–ª—é—á–∞—î `"google"` ‚Üí –í—Ö—ñ–¥.
  - `methods` –Ω–µ –≤–∫–ª—é—á–∞—î `"google"` ‚Üí `/login?error=UseDifferentMethod`.

#### Email/Password
- –ù–µ–º–∞—î email ‚Üí `/register`.
- –Ñ email:
  - `methods` –≤–∫–ª—é—á–∞—î `"credentials"` ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –ø–∞—Ä–æ–ª—å, –≤—Ö—ñ–¥ –∞–±–æ –ø–æ–º–∏–ª–∫–∞.
  - `methods` –Ω–µ –≤–∫–ª—é—á–∞—î `"credentials"` ‚Üí `/login?error=UseDifferentMethod`.

#### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- –ù–æ–≤–∏–π email ‚Üí –î–æ–¥–∞—î–º–æ –∑ –æ–±—Ä–∞–Ω–∏–º –º–µ—Ç–æ–¥–æ–º (`google` –∞–±–æ `credentials`).
- –ó–∞–π–Ω—è—Ç–∏–π email ‚Üí –ü—Ä–æ–ø–æ–Ω—É—î–º–æ —É–≤—ñ–π—Ç–∏ —Ç–∞ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ –Ω–æ–≤–∏–π –º–µ—Ç–æ–¥ —É –∫–∞–±—ñ–Ω–µ—Ç—ñ.

#### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –°—Ü–µ–Ω–∞—Ä—ñ—ó:
  1. –ù–æ–≤–∏–π Google ‚Üí –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è.
  2. –ù–æ–≤–∏–π email/password ‚Üí –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è.
  3. Google —î, –¥–æ–¥–∞—î–º–æ credentials.
  4. Credentials —î, –¥–æ–¥–∞—î–º–æ Google.
  5. –û–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏, –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ –∫–æ–∂–µ–Ω.

---

### –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –≤–∞—à—ñ —Å—Ç—Ä–∞—Ö–∏
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –Ø —Ä–æ–∑–ø–∏—à—É –≤—Å—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ –ª–æ–≥—ñ–≤ —ñ —Å—Ç–∞–Ω–æ–º –±–∞–∑–∏ –≤ Compass, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–∂–µ–Ω –≤–∏–ø–∞–¥–æ–∫.
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: –†—ñ–≤–Ω–æ–ø—Ä–∞–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ ‚Äî —Ü–µ –≤–∞—à —à–ª—è—Ö, –±–æ —Ü–µ –≥–Ω—É—á–∫–æ –π –∑—Ä—É—á–Ω–æ –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ.

---

# –ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–æ–¥—É 'authConfig'
**–î–æ–∫–ª–∞–¥–Ω–æ** —Ç–∞ **–ø–æ –ø–æ—Ä—è–¥–∫—É**, —è–∫ –ø—Ä–∞—Ü—é—î `authConfig`, –∫–æ–ª–∏ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ:

```js
export const { auth, handlers, signIn, signOut } = NextAuth(authConfig);
```

## üîÅ –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–¥–µ—è

`authConfig` ‚Äî —Ü–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è, —è–∫–∞ **–Ω–∞–ª–∞—à—Ç–æ–≤—É—î –≤–µ—Å—å –º–µ—Ö–∞–Ω—ñ–∑–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó** —É `next-auth@v5`.

–§—É–Ω–∫—Ü—ñ—è `NextAuth(authConfig)` —Å—Ç–≤–æ—Ä—é—î:
- `auth(req)` ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–µ—Å—ñ—ó (–Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ, —É middleware, —Ç–æ—â–æ),
- `handlers` ‚Äî –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è API –º–∞—Ä—à—Ä—É—Ç—ñ–≤ (`GET/POST /api/auth/*`),
- `signIn()` —Ç–∞ `signOut()` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≤—Ö–æ–¥—É/–≤–∏—Ö–æ–¥—É.

---

## üîß –©–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `authConfig` —ñ –∫–æ–ª–∏ –≤–æ–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è?

### 1. **`adapter`**
```js
adapter: MongoDBAdapter(clientPromise)
```

- –í–∫–∞–∑—É—î, **—è–∫ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —Å–µ—Å—ñ—ó** (—É –±–∞–∑—É MongoDB).
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î –∫–æ–ª–µ–∫—Ü—ñ—ó `users`, `accounts`, `sessions`, `verificationTokens`.
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `signIn`, `session`, `auth()` —ñ `handlers`.

> üî• –ë–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –±–∞–∑—ñ.

---

### 2. **`providers`**
```js
providers: [Google({...}), Credentials({...})]
```

- –ù–∞–¥–∞—é—Ç—å —Å–ø–æ—Å–æ–±–∏ –≤—Ö–æ–¥—É: Google OAuth, –∞–±–æ email/–ø–∞—Ä–æ–ª—å.
- –ö–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫–∞—î **—Å–≤–æ—é –ª–æ–≥—ñ–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó**:
  - Google ‚Üí –π–¥–µ –Ω–∞ `signIn` + `adapter`
  - Credentials ‚Üí –≤–∏–∫–ª–∏–∫–∞—î `authorize()` –∑ —Ç–≤–æ—î—é –ª–æ–≥—ñ–∫–æ—é

---

### 3. **`callbacks.signIn({ user, account })`**
–í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **–ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó**.

- –¢—É—Ç –º–æ–∂–Ω–∞:
  - –í—ñ–¥—Ö–∏–ª–∏—Ç–∏ –≤—Ö—ñ–¥: `return false` –∞–±–æ `return '/login?error=...'`
  - –î–æ–¥–∞—Ç–∏/–æ–Ω–æ–≤–∏—Ç–∏ —é–∑–µ—Ä–∞ –≤—Ä—É—á–Ω—É
  - –ó–±–µ—Ä–µ–≥—Ç–∏, —â–æ —é–∑–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤ Google –∞–±–æ credentials

> üß† –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ç—É—Ç —Ä—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è/–¥–æ–¥–∞–≤–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö, –±–æ `adapter` **–Ω–µ –¥–∞—î –∑–º–æ–≥–∏ –æ–Ω–æ–≤–∏—Ç–∏ –ø–æ–ª–µ `methods` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**.

---

### 4. **`callbacks.session({ session, token })`**
–í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è **–Ω–∞ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç**, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–µ—Å—ñ—è.

- –¢—É—Ç –º–∏ –∑–±–∞–≥–∞—á—É—î–º–æ —Å–µ—Å—ñ—é:
  - –¥–æ–¥–∞—î–º–æ `session.user.id`
  - –¥–æ–¥–∞—î–º–æ `session.user.role`, `status`, `methods`
- –¶–µ –ø–æ—Ç—Ä–∞–ø–ª—è—î –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —á–µ—Ä–µ–∑ `useSession()`.

---

### 5. **`session.strategy: "jwt"`**
–¶–µ –æ–∑–Ω–∞—á–∞—î:
- –ú–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Å–µ—Å—ñ—ó –≤ –±–∞–∑—ñ (`sessions` –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞)
- –í—Å—è —Å–µ—Å—ñ—è ‚Äî –≤ JWT —Ç–æ–∫–µ–Ω—ñ (–≤ cookie)

> üìå –¶–µ –∑—Ä—É—á–Ω–æ, –∞–ª–µ —Ç–æ–¥—ñ **–≤—Å–µ —Ç—Ä–µ–±–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –≤ `session` callback** –≤—Ä—É—á–Ω—É.

---

### 6. **`authorize(credentials)`**
–¶–µ —Ç—ñ–ª—å–∫–∏ –¥–ª—è Credentials Provider.

- –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤—Ö–æ–¥—ñ –ø–æ email/–ø–∞—Ä–æ–ª—å.
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —é–∑–µ—Ä–∞ + –ø–∞—Ä–æ–ª—å.
- –Ø–∫—â–æ –æ–∫ ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î `{ id, email }`.

> üîê –Ø–∫—â–æ –Ω–µ –ø–æ–≤–µ—Ä–Ω–µ—à `id`, NextAuth –≤–ø–∞–¥–µ –∑ –ø–æ–º–∏–ª–∫–æ—é.

---

### 7. **`auth()`**
–¶–µ –∑—Ä—É—á–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–∑ `src/auth.js`) ‚Äî –≤—ñ–Ω:
- —á–∏—Ç–∞—î —Å–µ—Å—ñ—é —á–µ—Ä–µ–∑ cookie
- –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–æ–∫–µ–Ω
- –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç —Å–µ—Å—ñ—ó `{ user }` –∞–±–æ `null`

> ‚ö†Ô∏è –ù–µ –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ `auth()` —É middleware, —è–∫—â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `authConfig` —î Node.js-–Ω–µ—Å—É–º—ñ—Å–Ω–∏–π –∫–æ–¥ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, MongoDB).

---

## üß† –Ø–∫ —É—Å–µ —Ä–∞–∑–æ–º –ø—Ä–∞—Ü—é—î:

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google" ‚Üí `signIn("google")`
2. NextAuth –æ–±—Ä–æ–±–ª—è—î OAuth ‚Üí –æ—Ç—Ä–∏–º–∞—î email + profile ‚Üí –≤–∏–∫–ª–∏–∫–∞—î `signIn` callback
3. –£ `signIn` –º–∏:
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ: —á–∏ —ñ—Å–Ω—É—î —é–∑–µ—Ä
   - –Ø–∫—â–æ –Ω—ñ ‚Üí —Ä–µ–¥—ñ—Ä–µ–∫—Ç–∏–º–æ –Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é
   - –Ø–∫—â–æ —î ‚Üí –æ–Ω–æ–≤–ª—é—î–º–æ `lastLogin`, –¥–æ–¥–∞—î–º–æ –º–µ—Ç–æ–¥
4. –°–µ—Å—ñ—è —Ñ–æ—Ä–º—É—î—Ç—å—Å—è ‚Üí –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `session` callback
5. –£ —Å–µ—Å—ñ—ó –º–∏ –¥–æ–¥–∞—î–º–æ id, role, status ‚Üí —Ü–µ –ª–µ—Ç–∏—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç
6. –§—Ä–æ–Ω—Ç –±–∞—á–∏—Ç—å `useSession()` —ñ —Ä–µ–∞–≥—É—î

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

–£ –ø—Ä–æ—î–∫—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `next-auth@5` –∑ —Ç–∞–∫–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏:

- Google OAuth
- Email/Password (—á–µ—Ä–µ–∑ CredentialsProvider)

–î–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `@auth/mongodb-adapter`, —â–æ –ø—Ä–∞—Ü—é—î –∑ MongoDB Atlas —á–µ—Ä–µ–∑ `clientPromise`.

---

### ‚öôÔ∏è authConfig ‚Äî –ª–æ–≥—ñ–∫–∞ –≤—Ö–æ–¥—É

- **adapter** ‚Äî MongoDBAdapter –∑–±–µ—Ä—ñ–≥–∞—î `users`, `accounts`, `sessions` —É –±–∞–∑—ñ
- **session.strategy = "jwt"** ‚Äî –¥–∞–Ω—ñ —Å–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ cookie, –Ω–µ –≤ –±–∞–∑—ñ
- **callbacks.signIn** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–µ—Ç–æ–¥—É (google/credentials), —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —é–∑–µ—Ä–∞
- **callbacks.session** ‚Äî –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ —Å–µ—Å—ñ—ó `user.id`, `user.role`, `user.status`, `user.methods`
- **authorize** ‚Äî –ª–æ–≥—ñ–∫–∞ –≤—Ö–æ–¥—É –ø–æ email/–ø–∞—Ä–æ–ª—é, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ `bcrypt`

---

### üß© –î–æ–¥–∞—Ç–∫–æ–≤–æ

- –ü—Ä–∏ –≤—Ö–æ–¥—ñ Google-—é–∑–µ—Ä–∞, —è–∫–∏–π —É–∂–µ —ñ—Å–Ω—É—î, –∞–ª–µ –∑ credentials ‚Äî —Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ `/login?error=...`
- –ü—Ä–∏ –≤—Ö–æ–¥—ñ –Ω–æ–≤–æ–≥–æ Google-—é–∑–µ—Ä–∞ ‚Äî —Ä–µ–¥—ñ—Ä–µ–∫—Ç –Ω–∞ `/register` (–ø–æ–∫–∏ –Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ)

---

### üì¶ –ö–æ–ª–µ–∫—Ü—ñ—ó –≤ –±–∞–∑—ñ

- `users` ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑ –ø–æ–ª—è–º–∏ email, role, status, methods
- `accounts` ‚Äî –¥–ª—è OAuth-–º–µ—Ç–æ–¥—ñ–≤
- `sessions` ‚Äî (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑ jwt-—Å—Ç—Ä–∞—Ç–µ–≥—ñ—î—é)

---

### üõ° Middleware

Middleware –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `auth()`, –±–æ —Ü–µ –Ω–µ—Å—É–º—ñ—Å–Ω–æ –∑ Edge Runtime. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ ‚Äî `getToken()` –∑ `next-auth/jwt`.

---

### –ê–Ω–∞–ª—ñ–∑ –∫–æ–¥—É `MongoDBAdapter`
–ö–æ–¥ —ñ–∑ `index.ts` –ø–æ–∫–∞–∑—É—î, —è–∫ –∞–¥–∞–ø—Ç–µ—Ä —Ä–µ–∞–ª—ñ–∑—É—î –º–µ—Ç–æ–¥–∏ `Adapter` —ñ–∑ `@auth/core/adapters`. 
–ù–∏–∂—á–µ –∫–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏, —è–∫—ñ —Å—Ç–æ—Å—É—é—Ç—å—Å—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –π –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

#### –ú–µ—Ç–æ–¥ `createUser`
```typescript
async createUser(data) {
  const user = to<AdapterUser>(data);
  await using db = await getDb();
  await db.U.insertOne(user);
  return from<AdapterUser>(user);
}
```
- **–©–æ —Ä–æ–±–∏—Ç—å**:
  - –ë–µ—Ä–µ –æ–±‚Äô—î–∫—Ç `data` (—Ç–∏–ø—É `AdapterUser`), —è–∫–∏–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤—ñ–¥ `Auth.js`.
  - –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –π–æ–≥–æ –≤ MongoDB-—Ñ–æ—Ä–º–∞—Ç —á–µ—Ä–µ–∑ `to` (–¥–æ–¥–∞—î `_id`).
  - –í—Å—Ç–∞–≤–ª—è—î –≤ –∫–æ–ª–µ–∫—Ü—ñ—é `users`.
  - –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É —Ñ–æ—Ä–º–∞—Ç—ñ `AdapterUser`.
- **–©–æ –≤ `data`**:
  - –î–ª—è Google: `email`, `name`, `image` (–∑ –ø—Ä–æ—Ñ—ñ–ª—é Google), –∞–ª–µ **–Ω–µ** –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–æ–ª—è —Ç–∏–ø—É `role` —á–∏ `comments`.
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–∏ –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª—é—î–º–æ `data`, —è–∫–µ –ø–µ—Ä–µ–¥–∞—î `Auth.js` —É `createUser`. –í–æ–Ω–æ —Ñ–æ—Ä–º—É—î—Ç—å—Å—è –∑ OAuth-–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —ñ –º–∏ –Ω–µ –º–æ–∂–µ–º–æ –¥–æ–¥–∞—Ç–∏ —Ç—É–¥–∏ `role` –Ω–∞–ø—Ä—è–º—É.

#### –ú–µ—Ç–æ–¥ `getUserByEmail`
```typescript
async getUserByEmail(email) {
  await using db = await getDb();
  const user = await db.U.findOne({ email });
  if (!user) return null;
  return from<AdapterUser>(user);
}
```
- **–©–æ —Ä–æ–±–∏—Ç—å**: –®—É–∫–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ `email` —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –π–æ–≥–æ.
- **–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å**: –ú–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ü–µ –≤ `signIn`, —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ –∑–∞–ø–∏—Å.

#### –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –≤ –∫–æ–¥—ñ
–ö–æ–º–µ–Ω—Ç–∞—Ä –ø—Ä–æ `client` —ñ `onClose` –Ω–∞—Ç—è–∫–∞—î –Ω–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, –∞–ª–µ –Ω–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è –∫–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—ó —Å—Ö–µ–º–∏. –ê–¥–∞–ø—Ç–µ—Ä —è–≤–Ω–æ —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–π —è–∫ "—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π", –±–µ–∑ –≤–±—É–¥–æ–≤–∞–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤.

---

### –ß–æ–º—É –º–∏ –Ω–µ –º–æ–∂–µ–º–æ –¥–æ–¥–∞—Ç–∏ `role` –Ω–∞–ø—Ä—è–º—É?
1. **–§—ñ–∫—Å–æ–≤–∞–Ω–∞ —Å—Ö–µ–º–∞**:
   - `MongoDBAdapter` –ø—Ä–∞—Ü—é—î –∑ —Ç–∏–ø–æ–º `AdapterUser`:
     ```typescript
     interface AdapterUser {
       id: string;
       email: string;
       emailVerified: Date | null;
       name?: string | null;
       image?: string | null;
     }
     ```
   - –ù–µ–º–∞—î `role`, `comments` —á–∏ —ñ–Ω—à–∏—Ö –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤.
2. **OAuth-–ø—Ä–æ–≤–∞–π–¥–µ—Ä**:
   - Google –ø–µ—Ä–µ–¥–∞—î —Ç—ñ–ª—å–∫–∏ –±–∞–∑–æ–≤—ñ –¥–∞–Ω—ñ (`email`, `name`, `image`), —ñ `Auth.js` –≤–∏–∫–ª–∏–∫–∞—î `createUser` —ñ–∑ —Ü–∏–º–∏ –¥–∞–Ω–∏–º–∏.
3. **–ö–æ–Ω—Ñ–ª—ñ–∫—Ç –ø—Ä–∏ —Ä—É—á–Ω–æ–º—É `upsert`**:
   - –Ø–∫—â–æ –º–∏ –¥–æ–¥–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ `signIn` —á–µ—Ä–µ–∑ `updateOne(..., { upsert: true })`, —Ü–µ –¥—É–±–ª—é—î —Ä–æ–±–æ—Ç—É –∞–¥–∞–ø—Ç–µ—Ä–∞ –π –≤–∏–∫–ª–∏–∫–∞—î `OAuthAccountNotLinked`.

---

### –î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è
–ü—Ä–æ —Ü—é –ø—Ä–æ–±–ª–µ–º—É –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó [Auth.js MongoDB Adapter](https://authjs.dev/reference/adapter/mongodb):
- –ê–¥–∞–ø—Ç–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î –±–∞–∑–æ–≤—ñ –º–µ—Ç–æ–¥–∏, –∞–ª–µ **–Ω–µ –∑–≥–∞–¥—É—î** –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–ª—ñ–≤ —É `users`.
- –£ [Customizing Models](https://authjs.dev/reference/core/adapters#customizing-the-adapter) —î —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:
  > "If you need to customize the schema, you can create a custom adapter by extending an existing one or writing your own."

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ:
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —à–ª—è—Ö**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `signIn` —á–∏ `session` –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è.
- **–ì–Ω—É—á–∫–∏–π —à–ª—è—Ö**: –ù–∞–ø–∏—Å–∞—Ç–∏ –∫–∞—Å—Ç–æ–º–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä.

---

### –ü—Ä–æ–±–ª–µ–º–∞
"–¶–µ –Ω–µ–Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∫–æ–ª–∏ –º–∏ –≤–≤–æ–¥–∏–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —ñ –Ω–µ –º–æ–∂–µ–º–æ –¥–æ–¥–∞—Ç–∏ —Å–≤–æ—ó –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ". –Ü —Ü–µ –ø—Ä–∞–≤–¥–∞ ‚Äî —É —Ç–∏–ø–æ–≤–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –º–∏ —Ö–æ—á–µ–º–æ:
- –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –ø–æ–ª—è–º–∏ (`role`, `comments`) –æ–¥—Ä–∞–∑—É.
- –ë—É—Ç–∏ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º–∏ –≤—ñ–¥ –∞–¥–∞–ø—Ç–µ—Ä–∞ —á–∏ –±–∞–∑–∏ (MongoDB, SQL, Excel).

–ù–∞—à –æ–±—Ö—ñ–¥ —É `middleware` (`role || "user"`) ‚Äî —Ü–µ —Ç–∏–º—á–∞—Å–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è, —è–∫–µ –Ω–µ –≤–∏—Ä—ñ—à—É—î –ø—Ä–æ–±–ª–µ–º—É –≤ –±–∞–∑—ñ.

---

### –û–ø—Ç–∏–º–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è
#### 1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ `signIn` (–±–µ–∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤)
–ú–∏ –≤–∂–µ –ø—Ä–æ–±—É–≤–∞–ª–∏ —Ü–µ, —ñ –≤–æ–Ω–æ –ø—Ä–∞—Ü—é—î, —è–∫—â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `upsert`. –†–æ–±–æ—á–∏–π `authConfig.js` –ø–ª—é—Å –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

```javascript
import { MongoDBAdapter } from "@auth/mongodb-adapter";
import clientPromise from "@/utils/db";
import Google from "next-auth/providers/google";
import Credentials from "next-auth/providers/credentials";
import bcrypt from "bcryptjs";

export const authConfig = {
  adapter: MongoDBAdapter(clientPromise),
  providers: [
    Google({
      clientId: process.env.GOOGLE_CLIENT_ID,
      clientSecret: process.env.GOOGLE_CLIENT_SECRET,
    }),
    Credentials({
      name: "Email and Password",
      credentials: {
        email: { label: "Email", type: "email" },
        password: { label: "Password", type: "password" },
      },
      async authorize(credentials) {
        const client = await clientPromise;
        const db = client.db();
        const users = db.collection("users");
        const user = await users.findOne({ email: credentials.email });
        if (!user) throw new Error("UserNotRegistered");
        if (!user.methods?.includes("credentials")) throw new Error("UseDifferentMethod");
        const isValid = bcrypt.compare(credentials.password, user.password);
        if (!isValid) throw new Error("InvalidPassword");
        console.log("Credentials: User authenticated:", { email: credentials.email });
        return { id: user._id.toString(), email: user.email, role: user.role };
      },
    }),
  ],
  session: { strategy: "jwt" },
  callbacks: {
    async jwt({ token, user }) {
      if (user) {
        token.role = user.role;
      }
      return token;
    },
    async signIn({ user, account }) {
      console.log("signIn called:", { email: user.email, provider: account?.provider });
      const client = await clientPromise;
      const db = client.db();
      const users = db.collection("users");

      if (account?.provider !== "credentials") {
        const existingUser = await users.findOne({ email: user.email });
        if (existingUser) {
          // –û–Ω–æ–≤–ª—é—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ role —á–∏ comments –≤—ñ–¥—Å—É—Ç–Ω—ñ
          const updates = {};
          if (!existingUser.role) updates.role = "user";
          if (!existingUser.comments) updates.comments = "–ù–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —á–µ—Ä–µ–∑ Google";
          if (Object.keys(updates).length > 0) {
            await users.updateOne(
              { email: user.email },
              { $set: { ...updates, lastLogin: new Date() } }
            );
            console.log("Updated user with defaults:", { email: user.email, updates });
          }
        }
        return true;
      }

      await users.updateOne(
        { email: user.email },
        { $set: { lastLogin: new Date() } }
      );
      return true;
    },
    async session({ session, token }) {
      const client = await clientPromise;
      const db = client.db();
      const user = await db.collection("users").findOne({ email: session.user.email });
      if (user) {
        session.user.id = user._id.toString();
        session.user.name = user.name;
        session.user.role = user.role;
        session.user.comments = user.comments;
        token.role = user.role;
      }
      return session;
    },
  },
};
```

- **–Ø–∫ –ø—Ä–∞—Ü—é—î**:
  - –ê–¥–∞–ø—Ç–µ—Ä —Å—Ç–≤–æ—Ä—é—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
  - –£ `signIn` –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î `role`/`comments`, —ñ –¥–æ–¥–∞—î–º–æ —ó—Ö, —è–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ.
  - –£ `session` –º–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ —Ü—ñ –¥–∞–Ω—ñ –≤ —Ç–æ–∫–µ–Ω —ñ —Å–µ—Å—ñ—é.

#### 2. –ö–∞—Å—Ç–æ–º–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä (–¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é)
–Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à –ø–æ–∑–±—É—Ç–∏—Å—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ `MongoDBAdapter` —ñ –≥–æ—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ SQL/Excel, –æ—Å—å –ø—Ä–∏–∫–ª–∞–¥:

```javascript
import { MongoDBAdapter } from "@auth/mongodb-adapter";
import clientPromise from "@/utils/db";

export function CustomMongoDBAdapter(client) {
  const adapter = MongoDBAdapter(client);

  const originalCreateUser = adapter.createUser;
  adapter.createUser = async (data) => {
    const user = await originalCreateUser(data);
    const clientInstance = await client;
    const db = clientInstance.db();
    await db.collection("users").updateOne(
      { _id: user._id },
      { $set: { role: "user", comments: "–°—Ç–≤–æ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä" } }
    );
    return { ...user, role: "user", comments: "–°—Ç–≤–æ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä" };
  };

  return adapter;
}

export const authConfig = {
  adapter: CustomMongoDBAdapter(clientPromise),
  // ... —Ä–µ—à—Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
};
```

- **–ü–µ—Ä–µ–≤–∞–≥–∞**: –¢–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é—î—à —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –π –º–æ–∂–µ—à –¥–æ–¥–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ –ø–æ–ª—è.

---

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
1. –û—á–∏—Å—Ç–∏ –±–∞–∑—É.
2. –£–≤—ñ–π–¥–∏ —á–µ—Ä–µ–∑ Google —ñ–∑ `authConfig.js` (–í–∞—Ä—ñ–∞–Ω—Ç 1).
3. –ü–µ—Ä–µ–≤—ñ—Ä:
   - –ë–∞–∑–∞: `{ email: "test@gmail.com", role: "user", comments: "–ù–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —á–µ—Ä–µ–∑ Google" }`.
   - –õ–æ–≥–∏: `Updated user with defaults: { email: "test@gmail.com", updates: { role: "user", comments: "..." } }`.
   - `/admin`: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ `/`.

---

### –í–∏—Å–Ω–æ–≤–æ–∫
- **–í–∞—Ä—ñ–∞–Ω—Ç 1**: –ü—Ä–æ—Å—Ç–µ —Ä—ñ—à–µ–Ω–Ω—è, —è–∫–µ –ø—Ä–∞—Ü—é—î –∑ `MongoDBAdapter` —ñ –¥–æ–¥–∞—î `role`/`comments` —É –±–∞–∑—É.
- **–í–∞—Ä—ñ–∞–Ω—Ç 2**: –ö–∞—Å—Ç–æ–º–Ω–∏–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –ø–æ–≤–Ω–æ—ó –≥–Ω—É—á–∫–æ—Å—Ç—ñ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –¥–ª—è SQL/Excel —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É).

–Ø –± –ø–æ—á–∞–≤ —ñ–∑ –í–∞—Ä—ñ–∞–Ω—Ç—É 1, –±–æ –≤—ñ–Ω —à–≤–∏–¥—à–∏–π —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ç–≤–æ—ó–π –ø–æ—Ç–æ—á–Ω—ñ–π –±–∞–∑—ñ. –°–ø—Ä–æ–±—É–π –π–æ–≥–æ, –ø–æ–¥—ñ–ª–∏—Å—è –ª–æ–≥–∞–º–∏, —ñ —è–∫—â–æ –≤—Å–µ –æ–∫ ‚Äî –º–∏ –≤–∏—Ä—ñ—à–∏–º–æ –ø—Ä–æ–±–ª–µ–º—É —Ä–∞–∑ —ñ –Ω–∞–∑–∞–≤–∂–¥–∏! –©–æ —Å–∫–∞–∂–µ—à?